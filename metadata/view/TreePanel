{
    "type": "Ext.tree.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "collapsible": true,
        "designer|userAlias": "treepanel",
        "designer|userClassName": "TreePanel",
        "itemId": "menuPanel",
        "store": "MenuStore",
        "title": "Topics",
        "titleCollapse": true,
        "width": 360
    },
    "name": "MyTreePanel",
    "configAlternates": {
        "plugins": "object"
    },
    "designerId": "4637c71b-4b07-4e2e-9a8f-b46306301fff",
    "viewControllerInstanceId": "34e4a2a8-57a5-45c3-9e8e-0d08c0f22958",
    "viewModelInstanceId": "64c7267a-7aba-4f54-8fcd-2bb1998696d8",
    "cn": [
        {
            "type": "Ext.tree.View",
            "reference": {
                "name": "viewConfig",
                "type": "object"
            },
            "codeClass": null,
            "userConfig": {
                "itemId": "treeMenu",
                "rootVisible": false,
                "width": null
            },
            "name": "MyTreeView",
            "designerId": "a6ea9d5f-6bcb-41f3-88ea-8e374f1c8114",
            "cn": [
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onTreeMenuBeforeRender",
                        "implHandler": [
                            "component.setLoading(true);",
                            "var ghUtil = Ext.create('SD.view.GitHubWrapper', {});",
                            "var treeData = ghUtil.getTree('master',function(tree,component){",
                            "   var treePnl =   Ext.ComponentQuery.query('[itemId=menuPanel]')[0];",
                            "   var st = treePnl.getStore();",
                            "   treePnl.getRootNode().appendChild(tree[0]);",
                            "",
                            "});"
                        ],
                        "name": "beforerender",
                        "scope": "me"
                    },
                    "name": "onTreeMenuBeforeRender",
                    "designerId": "018785f0-9a79-4f25-824a-44020333ea54"
                },
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onTreeItemClick",
                        "implHandler": [
                            "            //NOTE: It assumes that the leaf node will be a valid markdown file. Hence there is no check for .md",
                            "            if(record.data.leaf){",
                            "",
                            "               Ext.getCmp('content-pnl').mask('loading');",
                            "",
                            "               var path = record.data.blobpath;",
                            "               var ghUtil = Ext.create('SD.view.GitHubWrapper', {});",
                            "",
                            "                //TODO: This needs ceanup. We need to get rid of the user name in the pen",
                            "               var html = \"<iframe height='268' scrolling='no' src='http://codepen.io/ajit-kumar-azad/embed/{hash}/?height=268&theme-id=0' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 800px;'>See the Pen <a href='http://codepen.io/ajit-kumar-azad/pen/{hash}/'>{hash}</a> by Ajit Kumar (<a href='http://codepen.io/ajit-kumar-azad'>@ajit-kumar-azad</a>) on <a href='http://codepen.io'>CodePen</a>.</iframe>\";",
                            "               var tpl =  Ext.dom.Helper.createTemplate(html);",
                            "               ghUtil.getFileContent('master', path, function(err, data) {",
                            "",
                            "//                     console.log('DATA: ', data);",
                            "                   console.log('RECORD: ', record, item);",
                            "                    var el = Ext.dom.Helper.createDom(data);",
                            "",
                            "",
                            "                    var domEl = Ext.get(el);",
                            "                    var hash = domEl.getAttribute('data-slug-hash');",
                            "",
                            "                    console.log('CODE: ', hash);",
                            "",
                            "                   var header = '<div class=\"slide head\"><span class=\"logo\"></span><h3>' + record.parentNode.data.text + '</h3><h2 class=\"slide\">' + record.data.text + '</h2></div>';",
                            "",
                            "                    Ext.getCmp('content-pnl').setHtml(header + data);",
                            "                   Ext.getCmp('content-pnl').addCls('markdown-body');",
                            "",
                            "                   //TODO: This needs ceanup. We need to get rid of the user name in the pen",
                            "                    var elArr = Ext.dom.Query.select('a[href*=http://codepen.io/ajit-kumar-azad/pen]');",
                            "                    for (var i = 0; i < elArr.length; i++) {",
                            "                            el = elArr[i];",
                            "                            console.log('HASH: ', Ext.get(el).getAttribute('text'));",
                            "                            console.log('EL: ', Ext.get(el).parent());",
                            "",
                            "                            tpl.overwrite(Ext.get(el).parent(), {hash: Ext.get(el).getAttribute('text')});",
                            "                    }",
                            "",
                            "                    Ext.getCmp('content-pnl').unmask();",
                            "                });",
                            "            } else {",
                            "                //It is a parent node...just create a dummy slide content from the node text",
                            "",
                            "                //TODO: Make this configurable",
                            "                var html = '<div class=\"topic\"><div class=\"head\"><h1>' + record.data.text + '</h1></div><div class=\"footer\">' +",
                            "                    '2008 â€” 2015 Walking Tree Consultancy Services Pvt. Ltd. All rights reserved. This document is provided for the sole use of a named ' +",
                            "                    'participant in a technical training course.  Any other use or reproduction of this document is ' +",
                            "                    'unlawful without the express written consent of Walking Tree Consultancy Services Pvt. Ltd.</div></div>';",
                            "                Ext.getCmp('content-pnl').setHtml(html);",
                            "",
                            "            }",
                            "",
                            ""
                        ],
                        "name": "itemclick",
                        "scope": "me"
                    },
                    "name": "onTreeItemClick",
                    "designerId": "3433f5de-3c29-4c5e-ad0c-f32b06fe4fca"
                },
                {
                    "type": "viewcontrollereventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onTreeMenuRender",
                        "implHandler": [
                            "component.setLoading(false);"
                        ],
                        "name": "render",
                        "scope": "me"
                    },
                    "name": "onTreeMenuRender",
                    "designerId": "9b7cb964-ab45-44e6-b1f3-38a90b502446"
                }
            ]
        },
        {
            "type": "Ext.panel.Tool",
            "reference": {
                "name": "tools",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "tooltip": "Play the slideshow from the selected slide",
                "type": "maximize"
            },
            "name": "MyTool2",
            "designerId": "96bf8211-a503-4410-869e-58a3987efd93",
            "cn": [
                {
                    "type": "fixedfunction",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|params": [
                            "owner",
                            "tool",
                            "event"
                        ],
                        "fn": "callback",
                        "implHandler": [
                            "var doc = window.document;",
                            "  var docEl = doc.documentElement;",
                            "",
                            "  var requestFullScreen = docEl.requestFullscreen || docEl.mozRequestFullScreen || docEl.webkitRequestFullScreen || docEl.msRequestFullscreen;",
                            "  var cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;",
                            "",
                            "  if(!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {",
                            "    requestFullScreen.call(docEl);",
                            "  }",
                            "  else {",
                            "    cancelFullScreen.call(doc);",
                            "  }",
                            ""
                        ]
                    },
                    "name": "callback",
                    "designerId": "1a895f21-f044-4095-800e-d4fb0aae7ec0"
                }
            ]
        }
    ]
}